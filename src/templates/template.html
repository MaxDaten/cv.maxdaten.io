<!DOCTYPE html>
<html lang="$if(lang)$$lang$$else$en$endif$">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="color-scheme" content="light dark" />
        <meta name="generator" content="pandoc" />
        $for(author-meta)$
        <meta name="author" content="$author-meta$" />
        $endfor$ $if(date-meta)$
        <meta name="date" content="$date-meta$" />
        $endif$
        <title>$if(title-prefix)$$title-prefix$ - $endif$$pagetitle$</title>
        <style type="text/css">
            code {
                white-space: pre;
            }
        </style>
        $if(quotes)$
        <style type="text/css">
            q {
                quotes: "‚Äú" "‚Äù" "‚Äò" "‚Äô";
            }
        </style>
        $endif$ $if(highlighting-css)$
        <style type="text/css">
            $highlighting-css$
        </style>
        $endif$ $for(css)$
        <link
            rel="stylesheet"
            href="$css$"
            $if(html5)$$else$type="text/css"
            $endif$
        />
        $endfor$ $if(math)$ $math$ $endif$ $for(header-includes)$
        $header-includes$ $endfor$
        <!-- Privacy-friendly analytics by Plausible -->
        <script
            async
            src="https://plausible.io/js/pa-LMp9ilZvamFhsa5S7ZkVs.js"
        ></script>
        <script>
            ((window.plausible =
                window.plausible ||
                function () {
                    (plausible.q = plausible.q || []).push(arguments);
                }),
                (plausible.init =
                    plausible.init ||
                    function (i) {
                        plausible.o = i || {};
                    }));
            plausible.init();
        </script>
    </head>
    <body>
        <button id="theme-toggle" aria-label="Toggle dark mode">
            <span class="icon-sun">‚òÄÔ∏è</span>
            <span class="icon-moon">üåô</span>
        </button>
        $if(title)$
        <div id="header">
            <div class="title">
                <h1>$title$</h1>
                <h2>$subtitle$</h2>
                <div>$contact$</div>
            </div>
            <img
                class="profile-picture"
                src="$profile-picture$"
                alt="profile-picture"
            />
        </div>
        $endif$
        <div class="container">
            $for(include-before)$ $include-before$ $endfor$ $body$
            $for(include-after)$ $include-after$ $endfor$
        </div>
        <script>
            (function () {
                const toggle = document.getElementById("theme-toggle");
                const root = document.documentElement;

                function getPreferredTheme() {
                    const stored = localStorage.getItem("theme");
                    if (stored) return stored;
                    return window.matchMedia("(prefers-color-scheme: dark)")
                        .matches
                        ? "dark"
                        : "light";
                }

                function setTheme(theme) {
                    root.setAttribute("data-theme", theme);
                    localStorage.setItem("theme", theme);
                }

                setTheme(getPreferredTheme());

                toggle.addEventListener("click", function () {
                    const current = root.getAttribute("data-theme");
                    setTheme(current === "dark" ? "light" : "dark");
                });

                window
                    .matchMedia("(prefers-color-scheme: dark)")
                    .addEventListener("change", function (e) {
                        if (!localStorage.getItem("theme")) {
                            setTheme(e.matches ? "dark" : "light");
                        }
                    });
            })();
        </script>
    </body>
</html>
