<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"
    $if(lang)$
    lang="$lang$"
    xml:lang="$lang$"
    $endif$
>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta http-equiv="Content-Style-Type" content="text/css" />
        <meta name="color-scheme" content="light dark" />
        <meta name="generator" content="pandoc" />
        $for(author-meta)$
        <meta name="author" content="$author-meta$" />
        $endfor$ $if(date-meta)$
        <meta name="date" content="$date-meta$" />
        $endif$
        <title>$if(title-prefix)$$title-prefix$ - $endif$$pagetitle$</title>
        <style type="text/css">
            code {
                white-space: pre;
            }
        </style>
        $if(quotes)$
        <style type="text/css">
            q {
                quotes: "‚Äú" "‚Äù" "‚Äò" "‚Äô";
            }
        </style>
        $endif$ $if(highlighting-css)$
        <style type="text/css">
            $highlighting-css$
        </style>
        $endif$ $for(css)$
        <link
            rel="stylesheet"
            href="$css$"
            $if(html5)$$else$type="text/css"
            $endif$
        />
        $endfor$ $if(math)$ $math$ $endif$ $for(header-includes)$
        $header-includes$ $endfor$
        <script
            defer
            src="/scitylana/js/script.js"
            data-api="/scitylana/api/event"
            data-domain="maxdaten.io"
        ></script>
    </head>
    <body>
        <button id="theme-toggle" aria-label="Toggle dark mode">
            <span class="icon-sun">‚òÄÔ∏è</span>
            <span class="icon-moon">üåô</span>
        </button>
        $if(title)$
        <div id="header">
            <div class="title">
                <h1>$title$</h1>
                <h2>$subtitle$</h2>
                <div>$contact$</div>
            </div>
            <img
                class="profile-picture"
                src="$profile-picture$"
                alt="profile-picture"
            />
        </div>
        $endif$
        <div class="container">
            $for(include-before)$ $include-before$ $endfor$ $body$
            $for(include-after)$ $include-after$ $endfor$
        </div>
        <script>
            (function() {
                const toggle = document.getElementById('theme-toggle');
                const root = document.documentElement;

                function getPreferredTheme() {
                    const stored = localStorage.getItem('theme');
                    if (stored) return stored;
                    return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
                }

                function setTheme(theme) {
                    root.setAttribute('data-theme', theme);
                    localStorage.setItem('theme', theme);
                }

                setTheme(getPreferredTheme());

                toggle.addEventListener('click', function() {
                    const current = root.getAttribute('data-theme');
                    setTheme(current === 'dark' ? 'light' : 'dark');
                });

                window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function(e) {
                    if (!localStorage.getItem('theme')) {
                        setTheme(e.matches ? 'dark' : 'light');
                    }
                });
            })();
        </script>
    </body>
</html>
